<!DOCTYPE HTML>
<!--
  This page was scaffolded with Photon by HTML5 UP
  Template created by @ajlkn. Used under a Creative Commons Attribution 3.0 License.
  Link to the original template: https://html5up.net/
  License details:  html5up.net/license
-->
<html>

<head>
	<title>Community Resources</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="assets/css/main.css" />
	<noscript>
		<link rel="stylesheet" href="assets/css/noscript.css" />
	</noscript>
</head>

<body class="is-preload">

	<!-- Header -->
	<section id="header">
		<div class="inner">
			<h1 class="TOSS" id="TOSS"><strong>TOSS</strong></h1>
			<h1 class="TOSS">Temporary Overnight</h1>
			<h1 class="TOSS">Safe Space</h1>
			<div class="partialBorderWrapper">
				<p class="partialBorder"></p>
			</div>
			<h2 id="headerSubHeading">Providing Comfort, Safety, and Hope</h2>
		</div>
	</section>
	</section>

	<!-- One -->
	<section id="one" class="main style1">
		<div class="container">
			<h1 class="resourcesPageH1">
				<strong>
					You have been invited to share feedback with our management team.
				</strong>

			</h1>
			<h2 class="bodyContent">
				Please fill out the form below and press submit to leave your feedback.
			</h2>
			<div class="partialBorderWrapper">
				<p class="partialBorderDark"></p>
			</div>
			<form class="contactForm" id="feedbackForm" method="post" enctype="text/plain">
    <input type="text" name="name" placeholder="Your Name" id="name" class="contactFormInputs">
    <input type="email" name="email" placeholder="Your Email" id="email" class="contactFormInputs">
    <input type="text" name="phone" placeholder="Your Phone Number" id="phoneNumber" class="contactFormInputs">
    <input type="text" name="comment" placeholder="Your Feedback Here" id="comment" class="contactFormInputs">
    <input type="submit" value="Submit" id="contactForm">
</form>

<script>
	document.getElementById("feedbackForm").addEventListener("submit", function(event) {
	    event.preventDefault(); // Prevent default form submission
	
	    const form = event.target;
	    const formData = new FormData(form);
	
	    // Validation functions
	    function isValidEmail(email) {
	        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
	        return emailRegex.test(email);
	    }
	
	    function isValidPhoneNumber(phone) {
	        const phoneRegex = /^[+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im;
	        return phoneRegex.test(phone);
	    }
	
	    // Sanitize function
	    function sanitize(value) {
	        if (typeof value === 'string') {
	            return value.replace(/</g, '&lt;').replace(/>/g, '&gt;'); // Basic XSS protection
	        }
	        return value;
	    }
	
	    // Get and validate form data
	    const name = sanitize(formData.get("name"));
	    const email = sanitize(formData.get("email"));
	    const phone = sanitize(formData.get("phone"));
	    const comment = sanitize(formData.get("comment"));
	
	    if (!isValidEmail(email)) {
	        alert("Please enter a valid email address.");
	        return;
	    }
	
	    if (!isValidPhoneNumber(phone)) {
	        alert("Please enter a valid phone number.");
	        return;
	    }
	
	    const data = {
	        data: [
	            name,
	            email,
	            phone,
	            comment,
	            "", // Add empty strings to make the length 6.
	            ""
	        ]
	    };
	
	    fetch("https://script.google.com/macros/s/AKfycbzVb6_Qp6PZgBHaSamSMQn2mjcEe_JwkSpAdelW2N3q8qphzDDqGasoDp9isQ_UztvQZA/exec", {
	        method: "POST",
	        headers: {
	            "Content-Type": "application/json"
	        },
	        body: JSON.stringify(data)
	    })
	    .then(response => response.json())
	    .then(result => {
	        console.log(result);
	        // Handle the response from Apps Script (e.g., display a message)
	    })
	    .catch(error => {
	        console.error("Error:", error);
	        // Handle errors (e.g., display an error message)
	    });
	});
</script>
		</div>
	</section>

	<!-- Footer -->
	<section id="footer">
		<ul class="icons">
			<li><a href="#" class="icon brands alt fa-facebook-f"><span class="label">Facebook</span></a></li>
			<li><a href="#" class="icon brands alt fa-instagram"><span class="label">Instagram</span></a></li>
			<li><a href="mailto:info@safesleepalatka.org" class="icon solid alt fa-envelope"><span
						class="label">Email</span></a></li>
		</ul>

	</section>

	<!-- Scripts -->
	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/jquery.scrolly.min.js"></script>
	<script src="assets/js/browser.min.js"></script>
	<script src="assets/js/breakpoints.min.js"></script>
	<script src="assets/js/util.js"></script>
	<script src="assets/js/main.js"></script>

</body>

</html>
